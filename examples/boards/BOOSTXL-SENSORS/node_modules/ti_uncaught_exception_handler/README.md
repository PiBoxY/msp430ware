# TI Uncaught Exception Handler

An uncaught exception handler library for Node-Webkit & node

This library offers the following services:

* The ability to check if an uncaught-Exception have been produced in a previous application run
* The ability to post the uncaughtExceptions log file to TI web site for collection and analysis


## Installation

```bash
npm install git+ssh://git@gitorious.design.ti.com/guicomposer-nw/ti_uncaught_Exception_handler.git
```

## Usage
Typicall usage:

    - require the module
    - set the application name and version
    - if an uncaughtExceptions log file exist, ask for user permission to sent it to TI
    - If the user grants permission, post it, otherwise delete the file. 


``` js
    var ti_uncaught_Exception_handler = require('ti_uncaught_Exception_handler')();
    
    ti_uncaught_Exception_handler.setApplicationName("myAppName");
    ti_uncaught_Exception_handler.setApplicationVersion("2.1.1");
    if (ti_uncaught_Exception_handler.uncaughtExceptionLogFileExist())
    {
    
        //Ask the user for the permission to send the files
        //Use an appropriate dialog that matches you UI design
		if(window.confirm("An uncaught Exception occured\nSend the files to TI to fix the problem?"))
        {
            // this will post the log file
            // and then delete the file automatically
            ti_uncaught_Exception_handler.post();
        }
        else
        {
            // Delete the file to avoid showing again the confirmation
            // dialog the next time the application starts
            ti_uncaught_Exception_handler.deleteUncaughtExceptionLogFile();
        }
    }
```


## Functions Details

* __deleteUncaughtExceptionLogFile__ : deletes the uncaughtExceptions log file, if one exists.
* __getLogFileDirectory__ : returns the current uncaughtExceptions log file directory.
* __getLogFileName__ : returns the current uncaughtExceptions log file name.
* __setApplicationName__ : Sets the application name. The default name is "unknown" 
* __setApplicationVersion__ : Sets the application version. The default version is "unknown" 
* __setLogFileName__ : Use this method to change the uncaughtExceptions log file name. The default name is "uncaughtException.log"
* __setLogFileDirectory__ : Use this method to change the uncaughtExceptions log file directory location. The default directory is {user-home}/ti/{appname}/logs/
* __post__ : post the uncaughtExceptions log file to TI web server for collection and analysis
* __uncaughtExceptionLogFileExist__ : returns true if the uncaughtExceptions file exists. 


### (For Testing only)
* __setExitOnUncaughtException__ : Use this method to set if the application exits or not after an uncaught exception. The default is true (exit).

## Important Notes

1.	It is important that the ‘require’ for this module be called as early as possible in your application. This will ensure that no uncaught exception are missed.
2.	It is crucial that the user is asked for permission to send the log files. Please apply all relevant privacy laws when designing the UI.