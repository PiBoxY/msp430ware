# ti_crashhandler

A TI crash handling library for Node-Webkit

This library offers the following services:

* Configuration of BreakPad default crash directory
* The ability to check if there are any crash-dumps
* The ability to post the crash-dumps to TI crash server for collection and analysis


## Installation

```bash
npm install git+ssh://git@gitorious.design.ti.com/guicomposer-nw/ti_crashhandler.git
```

## Usage
The ti_crashhandler module .

``` js
  var crashhandler = require('ti_crashhandler')();

	if(crashhandler.crashDumpFilesExist())
	{		
		//Ask the user for the permission to send the files
		if(window.confirm("A Crash occured\nSend the files to TI to fix the problem?"))
		{
			crashhandler.post());
		}
		else
		{
			crashhandler.deleteCrashDumpFiles();
		}
	}
```


## Functions Details

* __crashDumpFilesExist__ : returns true if there are any crash-dump-files from previous application runs
* __post__ : post all crash-dump files and *delete* them. This function takes a callback function that is called when the http-post is completed.
``` js
	var crashhandler = require('ti_crashhandler')();

	crashhandler.post(function(err){ 
		if(err)
		{
			//and error occured
			console.log("error when posting crash-dumpfiles" + err.message);
		}
		else
		{
			console.log("posting crash-dumpfiles completed without errors");
		}
	});
```
* __getCrashDumpFileCount__ : returns the number of crash-dump files
* __getCrashDumpFileNames__ : Returns the names (only) of the crash-dump files
* __getCrashDumpDirectory__ : returns the directory/location of the crash-dump files.
* __deleteCrashDumpFiles__ : delete all crash-dump files.

### (For Testing only)
* __crash__ : this will cause the application to crash and generate a crash dump.

## Important Notes

1.	It is important that the ‘require’ for this module be called as early as possible in your application. This will insure that crash dumps
are saved where intended. Otherwise, if a crash happens before this module is loaded, 
you may end-up with some crash-dumps saved in a different/unknown directory.
2.	It is crucial that the user is asked for permission to send the crash-dump files.





